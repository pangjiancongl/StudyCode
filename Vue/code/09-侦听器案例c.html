<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
<div id="app">
    <div>
        <span>用户名：</span>
        <span>
        <input type="text" v-model.lazy='uname'>
      </span>
        <span>{{tip}}</span>
    </div>
</div>
<script type="text/javascript" src="./lib/vue-3.0.js"></script>
<script type="text/javascript">
    /*      
      侦听器
      1、采用侦听器监听用户名的变化
      2、调用后台接口进行验证
      3、根据验证的结果调整提示信息
    */
    let vm = Vue.createApp({
        data() {
            return {
                //定义数据
                uname: '',
                tip: '',
            }
        },
        //方法
        methods: {
            //定义事件
            checkName(name) {
                //定时器
                setTimeout(
                    //判断用户是否存在
                    () => {
                        if (name == 'admin') {
                            this.tip = '用户已经存在'
                        } else {
                            this.tip = '可以使用'
                        }
                    }, 2000
                )
            }
        },
        //计算属性
        computed: {},
        //监听器
        watch: {
            //监听uname
            uname: function (val) {
                this.tip = '正在检测....'
                this.checkName(val);
            }
        }
    }).mount('#app')

</script>
</body>
</html>
